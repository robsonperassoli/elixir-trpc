// This file is auto-generated by yuzu-codegen. Do not edit manually.
// Generated at: 2024-01-01T00:00:00.000Z

import { z } from "zod";

// GetProfile - GET /api/get-profile
export const GetProfileArgsSchema = z.object({
  id: z.string(),
});
export type GetProfileArgs = z.infer<typeof GetProfileArgsSchema>;

export const GetProfileResultSchema = z.object({
  name: z.string(),
  email: z
    .string()
    .regex(
      /^(?!\.)(?!.*\.\.)([a-z0-9_'+\\-\\.]*)[a-z0-9_+\\-]@([a-z0-9][a-z0-9\\-]*\\.)+[a-z]{2,}$/,
    ),
  age: z.number().int(),
});
export type GetProfileResult = z.infer<typeof GetProfileResultSchema>;

// UpdateProfile - PUT /api/profile/:id
export const UpdateProfileArgsSchema = z.object({
  id: z.string(),
  name: z.string(),
});
export type UpdateProfileArgs = z.infer<typeof UpdateProfileArgsSchema>;

export const UpdateProfileResultSchema = z.object({
  id: z.string(),
  name: z.string(),
});
export type UpdateProfileResult = z.infer<typeof UpdateProfileResultSchema>;

// Client Configuration
export interface YuzuClientConfig {
  baseUrl?: string;
  headers?: Record<string, string> | (() => Record<string, string>);
}

// Module state
let baseUrl = "http://localhost:4000";
let getHeaders: () => Record<string, string> = () => ({});

// Configure the client
export function configure(config: YuzuClientConfig): void {
  if (config.baseUrl !== undefined) {
    baseUrl = config.baseUrl;
  }
  if (config.headers !== undefined) {
    if (typeof config.headers === "function") {
      getHeaders = config.headers;
    } else {
      getHeaders = () => config.headers as Record<string, string>;
    }
  }
}

// API Functions

export async function getProfile(
  args: GetProfileArgs,
): Promise<GetProfileResult> {
  // Validate input
  const validated = GetProfileArgsSchema.parse(args);

  // Build URL
  const url = `${baseUrl}/api/get-profile`;

  // Make request
  const response = await fetch(url, {
    method: "GET",
    headers: {
      "Content-Type": "application/json",
      ...getHeaders(),
    },
  });

  // Handle response
  if (!response.ok) {
    throw new Error(`HTTP error! status: ${response.status}`);
  }

  // Parse and validate response
  const rawData = await response.json();
  return GetProfileResultSchema.parse(rawData);
}

export async function updateProfile(
  args: UpdateProfileArgs,
): Promise<UpdateProfileResult> {
  // Validate input
  const validated = UpdateProfileArgsSchema.parse(args);

  // Build URL with path params
  const url = `${baseUrl}/api/profile/${validated.id}`;

  // Make request
  const response = await fetch(url, {
    method: "PUT",
    headers: {
      "Content-Type": "application/json",
      ...getHeaders(),
    },
    body: JSON.stringify(validated),
  });

  // Handle response
  if (!response.ok) {
    throw new Error(`HTTP error! status: ${response.status}`);
  }

  // Parse and validate response
  const rawData = await response.json();
  return UpdateProfileResultSchema.parse(rawData);
}

// Re-export all schemas
export const schemas = {
  GetProfileArgsSchema,
  GetProfileResultSchema,
  UpdateProfileArgsSchema,
  UpdateProfileResultSchema,
};

export default {
  configure,
  getProfile,
  updateProfile,
};
